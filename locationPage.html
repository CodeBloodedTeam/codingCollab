<!DOCTYPE html>
<html>

<head>

    <title>Google Map and Places APIs Practice</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="UTF-8">

    <style>
        * {
            box-sizing: border-box;
        }

        #map {
            height: 100%;
            width: 100%;
            margin: auto;
        }

        html,
        body {
            height: 100%;
        }

        #searchPrompt {

            width: 100%;
        }

        #mapContainer {
            height: 70%;
            width: 100%;
        }


    </style>
</head>

<body>
    <h1>Places to Collaborate</h1>

    <div id="searchPrompt">
        <h2>Check out some great places to code and collab!</h2>
    </div>

    <div id="mapContainer">
        <div id="map"></div>
    </div>

    <div id="locationsDiv">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Address</th>
                    <th>Hours</th>
                    <th>Rating</th>
                </tr>
            </thead>
            <tbody>



            </tbody>
        </table>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>

    <script>
        var studyLocations = [
            "ChIJ0XspYxh554gRocPv5I_Kpm8",
            "ChIJu8iKN_x654gRTwmd9gWtGOU",
            "ChIJ_R3H1WZ654gR4pxbRDOomyY",
            "ChIJYbI5wzp554gRqxMJA_4M4_s",
            "ChIJkxKmNSp_54gRR9FoPq3FKfw",
            "ChIJKVxLkxVl54gRt2oJxMj55PI",
            "ChIJSfDF0dNn54gRT6ZhphMmEyU",
            "ChIJC99qTMtn54gRtlbMV-DDSJY",
            "ChIJ0ctB7cV654gRxMBMcdr9AN0",
            "ChIJGwBhSMV654gR0W59VlLMV2w"
        ]

        var map;


        function initMap() {

            map = new google.maps.Map(document.getElementById("map"), {
                center: {
                    lat: 28.538336,
                    lng: -81.379234
                },
                zoom: 12
            });

            var service = new google.maps.places.PlacesService(map);

            studyLocations.forEach(function (item, index, array) {
                service.getDetails({
                    placeId: item
                }, function (place, status) {
                    if (status === google.maps.places.PlacesServiceStatus.OK) {
                        console.log(place);
                        var marker = new google.maps.Marker({
                            map: map,
                            position: place.geometry.location
                        });

                        var infowindow = new google.maps.InfoWindow();

                        google.maps.event.addListener(marker, 'click', function () {
                            infowindow.setContent(`<div><strong>${place.name}</strong></div>`);
                            infowindow.open(map, this);
                        });

                        displayLocations(place)

                    }
                })
            })

        }

        function displayLocations(locationObject) {
            var name = locationObject.name;
            var address = locationObject.vicinity;
            var hours = locationObject.opening_hours.weekday_text;
            var rating = locationObject.rating;


            console.log(locationObject.name, locationObject.formatted_address,  locationObject.opening_hours.weekday_text, locationObject.opening_hours.open_now, locationObject.rating)
            $("table > tbody").append(`<tr><td>${name}</td><td>${address}</td><td>${hours[0]}</td><td>${rating}<td></tr>`)

        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBe-zoP-oMRoBbGvHbH1q7hpNX4swuSI_4&libraries=places&callback=initMap"
        async defer></script>

</body>

</html>